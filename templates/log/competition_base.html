{% extends 'log/workout_base.html' %}
{% block customHeader %}
    <script type="text/javascript"> 
        $(document).ready(function () {
            $('#viewSelectionSubmit').click(hollo.competition.change_view);
            $('#viewType').change(function() { hollo.competition.select_view(this.value); });
        });
    </script>
{% endblock %}
{% load log_tags %}

{% block mainMenu %}
    <li><a href="{% url log.views.workout.monthly_view athlete_id=athlete.person.user.username,year=first_day.year,month=first_day.month %}">Deník</a></li>
    <li class="active"><a>Závody</a></li>
{% endblock %}

{% block content %}
<div id="viewSelection">
    <div id="athleteSelection">
<h2 class="textversion">Zobrazený atlet</h2>
    {% with "competition" as view_type %}
    <a href="{% url log.views.change_athlete view_type=view_type %}?old={{ athlete.person.user.username }}">
    {% endwith %}
        <img src="{{ athlete.person.get_image_url|default:"/site_media/log/images/user_unknown.png" }}" width="22" height="22" alt="{{ athlete }}" id="athleteImage">
        <span id="athleteName">{{ athlete }}</span>
    </a>
    </div>
<form action="{% url log.views.competition.change_view athlete_id=athlete.person.user.username %}" method="post">
<fieldset>
<legend class="textversion">Zobrazení závodů</legend>
<label for="viewType">Pohled</label>
<select id="viewType" name="viewType">
    <option {% ifequal viewType "monthly" %}selected="selected" {% endifequal %}value="monthly">Měsíční</option>
    <option {% ifequal viewType "yearly" %}selected="selected" {% endifequal %}value="yearly">Roční</option>
</select>
<label for="month">Měsíc</label>
<select id="month" name="month">
    {% select_month first_day.month %}
</select>
<label for="year">Rok</label>
<select id="year" name="year">
    {% select_year 2000 2010 first_day.year %}
</select>
<button type="submit" id="viewSelectionSubmit">Zobrazit</button>
</fieldset>
</form>
</div>

<div id="competitionSummary"><div>
{% block competitionSummary %}
{% endblock %}
</div>
</div>

<div id="competitionView">
{% block competitionView %}
{% endblock %}
</div>

{% endblock %}
