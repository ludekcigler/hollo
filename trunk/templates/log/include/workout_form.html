{% load log_tags %}
<div id="workoutForm">

{% ifequal form_action "add" %}
<h2>Nový trénink</h2>
{% else %}
{% ifequal form_action "edit" %}
<h2>Upravit trénink</h2>
{% endifequal %}
{% endifequal %}

{% ifequal form_action "add" %}
<form id="workoutEdit" action="{% url log.views.workout.add_form athlete_id=athlete.person.user.username,year=day.year,month=day.month,day=day.day %}?continue={{ continue|urlencode }}" method="post">
{% else %}
{% ifequal form_action "edit" %}
<form id="workoutEdit" action="{% url log.views.workout.edit_form athlete_id=athlete.person.user.username,year=day.year,month=day.month,day=day.day,workout_id=workout.id %}?continue={{ continue|urlencode }}" method="post">
{% endifequal %}
{% endifequal %}
    <fieldset class="buttonSet">
        <legend class="textversion">Uložit</legend>
        <input type="submit" name="submitOk" class="ok button" value="Uložit">
        <input type="submit" name="submitCancel" class="cancel button" value="Zrušit">
    </fieldset>
    <fieldset class="workoutItems">
        <legend>Části tréninku</legend>
        <input type="hidden" name="day" value="{{ day|date:"Y-m-d" }}">
        <input type="hidden" name="id" value="{{ workout.id }}">
        <input type="hidden" name="num_workout_items" id="numWorkoutItems" value="{{ phase_items|length }}">
        <ol>
                {% for phase_item in phase_items %}
                <li>
                    <ul>
                        <li><label for="workout_type_{{ forloop.counter0 }}">Typ</label>
                        <select name="workout_type_{{ forloop.counter0 }}" 
                            class="workoutType" id="workout_type_{{ forloop.counter0 }}">
                            {% if phase_item %}
                                {% select_workout_type phase_item.type %}
                            {% else %}
                                {% select_workout_type "Roz" %}
                            {% endif %}
                        </select>
                        </li>
                        <li>
                        <label for="workout_desc_{{ forloop.counter0 }}">Popis</label>
                        <input type="text" id="workout_desc_{{ forloop.counter0 }}"
                            name="workout_desc_{{ forloop.counter0 }}" class="workoutDesc" value="{{ phase_item.desc }}">
                        </li>
                        <li>
                        <label for="workout_km_{{ forloop.counter0 }}">Km</label>
                        <input type="text" id="workout_km_{{ forloop.counter0 }}"
                            name="workout_km_{{ forloop.counter0 }}" value="{{ phase_item.km }}" class="workoutKm">
                        </li>
                        <li>
                            <label>&nbsp;</label>
                        <input type="image" name="submitRemoveWorkoutItem_{{ forloop.counter0 }}" src="/site_media/log/images/icons/remove_small.png" alt="Smazat" title="Smazat část tréninku" class="removeWorkoutItem" size="16;16" value="removeWorkoutItem_{{ forloop.counter0 }}">
                        </li>
                    </ul>
                </li>
                {% endfor %}
        </ol>
        <p class="addWorkoutItem">
        <input type="submit" name="submitAddWorkoutItem" value="Přidat část tréninku" id="addWorkoutItem" class="button">
        </p>
    </fieldset>
    <fieldset class="workoutAdditionalInfo">
        <legend class="textversion">Další informace</legend>
        <label for="weather">Počasí</label><input type="text" id="weather" name="weather" value="{{ workout.weather }}">
        <label for="rating_satisfaction">Spokojenost</label><input type="text" id="rating_satisfaction" name="rating_satisfaction" value="{{ workout.rating_satisfaction|default:"3" }}">
        <label for="rating_difficulty">Obtížnost</label><input type="text" id="rating_difficulty" name="rating_difficulty" value="{{ workout.rating_difficulty|default:"3" }}">
        <label for="note">Poznámky</label><textarea name="note" id="note">{{ workout.note }}</textarea>
    </fieldset>
</form>
</div>
